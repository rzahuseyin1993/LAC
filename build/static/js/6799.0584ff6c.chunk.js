"use strict";(self.webpackChunklac=self.webpackChunklac||[]).push([[6799],{51344:(e,n,t)=>{function o(e){return null!=l(e)||null!=s(e)}function i(e){return a.test(e)}function r(e){var n;return null!==(n=l(e))&&void 0!==n?n:s(e)}function s(e){const n=new Date(e);return function(e,n){if(Number.isNaN(e.getTime()))return!1;let t=!0;if(c&&/\d+\W*$/.test(n)){const e=n.match(/[a-zA-Z]{2,}/);if(e){let n=!1,o=0;for(;!n&&o<=e.length;)n=!u.test(e[o]),o++;t=!n}}return t}(n,e)?Number.isNaN(n.getTime())?null:n.getTime()-6e4*n.getTimezoneOffset():null}function l(e){var n,t,o,i;const r=a.exec(e);if(null===r||void 0===r||!r.groups)return null;const s=r.groups,l=+s.year,u=+s.month-1,c=+s.day,d=+(null!==(n=s.hours)&&void 0!==n?n:"0"),f=+(null!==(t=s.minutes)&&void 0!==t?t:"0"),g=+(null!==(o=s.seconds)&&void 0!==o?o:"0");if(d>23)return null;if(f>59)return null;if(g>59)return null;const m=null!==(i=s.ms)&&void 0!==i?i:"0",p=m?+m.padEnd(3,"0").substring(0,3):0;let y;if(s.isUTC||!s.offsetSign)y=Date.UTC(l,u,c,d,f,g,p);else{const e=+s.offsetHours,n=+s.offsetMinutes;y=6e4*("+"===s.offsetSign?-1:1)*(60*e+n)+Date.UTC(l,u,c,d,f,g,p)}return Number.isNaN(y)?null:y}t.d(n,{Br:()=>i,Cq:()=>o,_U:()=>r});const a=/^(?:(?<year>-?\d{4,})-(?<month>\d{2})-(?<day>\d{2}))(?:T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})(?:\.(?<ms>\d+))?)?(?:(?<isUTC>Z)|(?:(?<offsetSign>\+|-)(?<offsetHours>\d{2}):(?<offsetMinutes>\d{2})))?$/;const u=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,c=!Number.isNaN(new Date("technology 10").getTime())},10907:(e,n,t)=>{t.d(n,{BM:()=>I,bd:()=>k,sO:()=>T,xD:()=>c});var o=t(51344),i=t(50076),r=t(80963),s=t(20176),l=t(1484),a=t(53430);const u={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function c(e){return u[e]}function*d(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const n of e.features)n&&(yield n)}}function*f(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const n of e.coordinates)yield*n;break;case"MultiPolygon":for(const n of e.coordinates)for(const e of n)yield*e}}function g(e){for(const n of e)if(n.length>2)return!0;return!1}function m(e){let n=0;for(let t=0;t<e.length;t++){const o=e[t],i=e[(t+1)%e.length];n+=o[0]*i[1]-i[0]*o[1]}return n<=0}function p(e){const n=e[0],t=e[e.length-1];return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]||e.push(n),e}function y(e,n,t){switch(n.type){case"LineString":case"MultiPoint":return function(e,n,t){return b(e,n.coordinates,t),e}(e,n,t);case"MultiLineString":return function(e,n,t){for(const o of n.coordinates)b(e,o,t);return e}(e,n,t);case"MultiPolygon":return function(e,n,t){for(const o of n.coordinates){h(e,o[0],t);for(let n=1;n<o.length;n++)w(e,o[n],t)}return e}(e,n,t);case"Point":return function(e,n,t){return F(e,n.coordinates,t),e}(e,n,t);case"Polygon":return function(e,n,t){const o=n.coordinates;h(e,o[0],t);for(let i=1;i<o.length;i++)w(e,o[i],t);return e}(e,n,t)}}function h(e,n,t){const o=p(n);!function(e){return!m(e)}(o)?b(e,o,t):v(e,o,t)}function w(e,n,t){const o=p(n);!function(e){return m(e)}(o)?b(e,o,t):v(e,o,t)}function b(e,n,t){for(const o of n)F(e,o,t);e.lengths.push(n.length)}function v(e,n,t){for(let o=n.length-1;o>=0;o--)F(e,n[o],t);e.lengths.push(n.length)}function F(e,n,t){const[o,i,r]=n;e.coords.push(o,i),t.hasZ&&e.coords.push(r||0)}function j(e){switch(typeof e){case"string":return(0,o.Br)(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function T(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4326;if(!e)throw new i.A("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new i.A("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const o="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,s=(0,r.oT)({wkid:n})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(".*(".concat(n,")$"),"i");if(!o||!s.test(o))throw new i.A("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function I(e){var n,t;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[],r=new Set,s=new Set;let l,u=!1,m=null,p=!1,{geometryType:y=null}=o,h=!1;for(const b of d(e)){const{geometry:e,properties:n,id:t}=b;if((!e||(y||(y=c(e.type)),c(e.type)===y))&&(u||(u=g(f(e))),p||(p=null!=t,p&&(l=typeof t,n&&(m=Object.keys(n).filter((e=>n[e]===t))))),n&&m&&p&&null!=t&&(m.length>1?m=m.filter((e=>n[e]===t)):1===m.length&&(m=n[m[0]]===t?m:[])),!h&&n)){let e=!0;for(const t in n){if(r.has(t))continue;const o=n[t];if(null==o){e=!1,s.add(t);continue}const l=j(o);if("unknown"===l){s.add(t);continue}s.delete(t),r.add(t);const u=(0,a.rS)(t);u&&i.push({name:u,alias:t,type:l})}h=e}}const w=null!==(n=(0,a.rS)(1===(null===(t=m)||void 0===t?void 0:t.length)&&m[0]||null))&&void 0!==n?n:void 0;if(w)for(const c of i)if(c.name===w&&(0,a.WA)(c)){c.type="esriFieldTypeOID";break}return{fields:i,geometryType:y,hasZ:u,objectIdFieldName:w,objectIdFieldType:l,unknownFields:Array.from(s)}}function k(e,n){return Array.from(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const{geometryType:t,objectIdField:o}=n;for(const r of e){var i;const{geometry:e,properties:a,id:u}=r;if(e&&c(e.type)!==t)continue;const d=a||{};let f;o&&(f=d[o],null==u||f||(d[o]=f=u));const g=new s.Om(e?y(new l.A,e,n):null,d,null,null!==(i=f)&&void 0!==i?i:void 0);yield g}}()}(d(e),n))}},40098:(e,n,t)=>{t.d(n,{$1:()=>y,CR:()=>p,MB:()=>f,Yx:()=>a,bP:()=>c});var o=t(51344),i=t(80963),r=t(53430);class s{constructor(){this.code=null,this.description=null}}class l{constructor(e){this.error=new s,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new l(e)}class u{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new u(e)}const d=new Set;function f(e,n,t){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];d.clear();for(const s in t){const i=e.get(s);if(!i)continue;const l=g(i,t[s]);if(d.add(i.name),i&&(o||i.editable)){const e=(0,r.CJ)(i,l);if(e)return a((0,r.uo)(e,i,l));n[i.name]=l}}for(const r of null!==(i=null===e||void 0===e?void 0:e.requiredFields)&&void 0!==i?i:[]){var i;if(!d.has(r.name))return a('missing required field "'.concat(r.name,'"'))}return null}function g(e,n){let t=n;return(0,r.WA)(e)&&"string"==typeof n?t=parseFloat(n):(0,r.yM)(e)&&null!=n&&"string"!=typeof n?t=String(n):(0,r.vE)(e)&&"string"==typeof n&&(t=(0,o._U)(n)),(0,r.WX)(t)}let m;function p(e,n){if(!e||!(0,i.fn)(n))return e;if("rings"in e||"paths"in e){if(null==m)throw new TypeError("geometry engine not loaded");return m.simplify(n,e)}return e}async function y(e,n){!(0,i.fn)(e)||"esriGeometryPolygon"!==n&&"esriGeometryPolyline"!==n||await async function(){return null==m&&(m=await Promise.all([t.e(2612),t.e(1669)]).then(t.bind(t,1669))),m}()}},26799:(e,n,t)=>{t.d(n,{GA:()=>x,GL:()=>k,I:()=>M,J0:()=>N,Ki:()=>P,Px:()=>S,QE:()=>j,bV:()=>A,bW:()=>C,vJ:()=>F});t(35238);var o=t(3825),i=t(50076),r=t(76460),s=t(90534),l=t(80963),a=t(45417),u=t(98618),c=t(75146),d=t(10907),f=t(40296),g=t(40098),m=t(1900),p=t(6127),y=t(67478),h=t(13312);const w=()=>r.A.getLogger("esri.layers.ogc.ogcFeatureUtils"),b="startindex",v=new Set([b,"offset"]),F="http://www.opengis.net/def/crs/",j="".concat(F,"OGC/1.3/CRS84");var T,I;async function k(e,n){var t;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const{links:a}=e,u=W(a,"items",T.geojson)||W(a,"http://www.opengis.net/def/rel/ogc/1.0/items",T.geojson);if(null==u)throw new i.A("ogc-feature-layer:missing-items-page","Missing items url");const{apiKey:c,customParameters:g,signal:h}=r,v=(0,s.s2)(u.href,e.landingPage.url),F={limit:l,...g,token:c},j=(0,s.a6)(v,F),I={accept:T.geojson},{data:k}=await(0,o.A)(j,{signal:h,headers:I}),A=null!==(t=R(j,l,k.links))&&void 0!==t?t:b;(0,d.sO)(k);const S=(0,d.BM)(k,{geometryType:n.geometryType}),P=n.fields||S.fields||[],x=null!=n.hasZ?n.hasZ:S.hasZ,N=S.geometryType,C=n.objectIdField||S.objectIdFieldName||"OBJECTID";let M=n.timeInfo;const G=P.find((e=>{let{name:n}=e;return n===C}));if(G)G.editable=!1,G.nullable=!1;else{if(!S.objectIdFieldType)throw new i.A("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");P.unshift({name:C,alias:C,type:"number"===S.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(C!==S.objectIdFieldName){const e=P.find((e=>{let{name:n}=e;return n===S.objectIdFieldName}));e&&(e.type="esriFieldTypeInteger")}P===S.fields&&S.unknownFields.length>0&&w().warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:S.unknownFields}});for(const o of P){if(null==o.name&&(o.name=o.alias),null==o.alias&&(o.alias=o.name),"esriFieldTypeOID"!==o.type&&"esriFieldTypeGlobalID"!==o.type&&(o.editable=null==o.editable||!!o.editable,o.nullable=null==o.nullable||!!o.nullable),!o.name)throw new i.A("ogc-feature-layer:invalid-field-name","field name is missing",{field:o});if(!p.m.jsonValues.includes(o.type))throw new i.A("ogc-feature-layer:invalid-field-type",'invalid type for field "'.concat(o.name,'"'),{field:o})}if(M){var O;const e=new m.A(P);if(M.startTimeField){const n=e.get(M.startTimeField);n?(M.startTimeField=n.name,n.type="esriFieldTypeDate"):M.startTimeField=null}if(M.endTimeField){const n=e.get(M.endTimeField);n?(M.endTimeField=n.name,n.type="esriFieldTypeDate"):M.endTimeField=null}if(M.trackIdField){const n=e.get(M.trackIdField);n?M.trackIdField=n.name:(M.trackIdField=null,w().warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:M}}))}(O=M).timeReference||(O.timeReference={timeZoneIANA:y.n$}),M.startTimeField||M.endTimeField||(w().warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:M}}),M=null)}return{drawingInfo:N?(0,f.F0)(N):null,extent:D(e),geometryType:N,fields:P,hasZ:!!x,objectIdField:C,paginationParameter:A,timeInfo:M}}async function A(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{links:t,url:r}=e,l=W(t,"data",T.json)||W(t,"http://www.opengis.net/def/rel/ogc/1.0/data",T.json);if(null==l)throw new i.A("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:a,customParameters:u,signal:c}=n,d=(0,s.s2)(l.href,r),{data:f}=await(0,o.A)(d,{signal:c,headers:{accept:T.json},query:{...u,token:a}});for(const o of f.collections)o.landingPage=e;return f}async function S(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{links:t,url:r}=e,l=W(t,"conformance",T.json)||W(t,"http://www.opengis.net/def/rel/ogc/1.0/conformance",T.json);if(null==l)throw new i.A("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:a,customParameters:u,signal:c}=n,d=(0,s.s2)(l.href,r),{data:f}=await(0,o.A)(d,{signal:c,headers:{accept:T.json},query:{...u,token:a}});return f}async function P(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{apiKey:t,customParameters:i,signal:r}=n,{data:s}=await(0,o.A)(e,{signal:r,headers:{accept:T.json},query:{...i,token:t}});return s.url=e,s}async function x(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{links:t,url:i}=e,r=W(t,"service-desc",T.openapi);if(null==r)return w().warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:l,customParameters:a,signal:u}=n,c=(0,s.s2)(r.href,i),{data:d}=await(0,o.A)(c,{signal:u,headers:{accept:T.openapi},query:{...a,token:l}});return d}function N(e){const n=/^http:\/\/www\.opengis.net\/def\/crs\/(?<authority>.*)\/(?<version>.*)\/(?<code>.*)$/i.exec(e),t=null===n||void 0===n?void 0:n.groups;if(!t)return null;const{authority:o,code:i}=t;switch(o.toLowerCase()){case"ogc":switch(i.toLowerCase()){case"crs27":return h.A.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return h.A.WGS84.wkid;default:return null}case"esri":case"epsg":{const e=Number.parseInt(i,10);return Number.isNaN(e)?null:e}default:return null}}async function C(e,n,t){const o=await M(e,n,t);return(0,u.ZF)(o)}async function M(e,n,t){var r,f;const{collection:{links:p,landingPage:{url:y}},layerDefinition:w,maxRecordCount:b,queryParameters:{apiKey:v,customParameters:F},spatialReference:j,supportedCrs:I}=e,k=W(p,"items",T.geojson)||W(p,"http://www.opengis.net/def/rel/ogc/1.0/items",T.geojson);if(null==k)throw new i.A("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:A,num:S,start:P,timeExtent:x,where:N}=n;if(n.objectIds)throw new i.A("ogc-feature-layer:query-by-objectids-not-supported","Queries with object ids are not supported");const C=h.A.fromJSON(j),M=null!==(r=n.outSpatialReference)&&void 0!==r?r:C,O=M.isWGS84?null:G(M,I),D=q(A,I),R=function(e){if(null==e)return null;const{start:n,end:t}=e;return"".concat(null!=n?n.toISOString():"..","/").concat(null!=t?t.toISOString():"..")}(x),Z=null!=(X=N)&&X&&"1=1"!==X?X:null,L=null!==S&&void 0!==S?S:null==P?b:10,J=0===P?void 0:P,{fields:E,geometryType:K,hasZ:U,objectIdField:$,paginationParameter:B}=w,z=(0,s.s2)(k.href,y),{data:_}=await(0,o.A)(z,{...t,query:{...F,...D,crs:O,datetime:R,query:Z,limit:L,[B]:J,token:v},headers:{accept:T.geojson}}),H=(0,d.bd)(_,{geometryType:K,hasZ:U,objectIdField:$}),Q=H.length===L&&!!W(null!==(f=_.links)&&void 0!==f?f:[],"next",T.geojson),V=new m.A(E);var X;for(const o of H){const e={};(0,g.MB)(V,e,o.attributes),e[$]=o.attributes[$],o.attributes=e}if(!O&&M.isWebMercator)for(const o of H)if(null!=o.geometry&&null!=K){const e=(0,u.zv)(o.geometry,K,U,!1);e.spatialReference=h.A.WGS84,o.geometry=(0,u.Ux)((0,a.Cv)(e,M))}for(const o of H)o.objectId=o.attributes[$];const Y=O||!O&&M.isWebMercator?M.toJSON():l.KK,ee=new c.A;return ee.exceededTransferLimit=Q,ee.features=H,ee.fields=E,ee.geometryType=K,ee.hasZ=U,ee.objectIdFieldName=$,ee.spatialReference=Y,ee}function G(e,n){var t,o,i;const{isWebMercator:r,wkid:s}=e;if(!s)return null;const l=r?null!==(t=null!==(o=null!==(i=n[3857])&&void 0!==i?i:n[102100])&&void 0!==o?o:n[102113])&&void 0!==t?t:n[900913]:n[e.wkid];return l?"".concat(F).concat(l):null}function O(e){if(null==e)return"";const{xmin:n,ymin:t,xmax:o,ymax:i}=e;return"".concat(n,",").concat(t,",").concat(o,",").concat(i)}function q(e,n){if(!function(e){return null!=e&&"extent"===e.type}(e))return null;const{spatialReference:t}=e;if(!t||t.isWGS84)return{bbox:O(e)};const o=G(t,n);return null!=o?{bbox:O(e),"bbox-crs":o}:t.isWebMercator?{bbox:O((0,a.Cv)(e,h.A.WGS84))}:null}function D(e){var n;const t=null===(n=e.extent)||void 0===n?void 0:n.spatial;if(!t)return null;const o=t.bbox[0],i=4===o.length,[r,s]=o,l=i?void 0:o[2];return{xmin:r,ymin:s,xmax:i?o[2]:o[3],ymax:i?o[3]:o[4],zmin:l,zmax:i?void 0:o[5],spatialReference:h.A.WGS84.toJSON()}}function W(e,n,t){var o;return null!==(o=e.find((e=>{let{rel:o,type:i}=e;return o===n&&i===t})))&&void 0!==o?o:e.find((e=>{let{rel:t,type:o}=e;return t===n&&!o}))}function R(e,n,t){var o;if(!t)return;const i=W(t,"next",T.geojson),r=null===(o=(0,s.An)(null===i||void 0===i?void 0:i.href))||void 0===o?void 0:o.query;if(!r)return;const l=(0,s.An)(e).query,a=Object.keys(null!==l&&void 0!==l?l:{}),u=Object.entries(r).filter((e=>{let[n]=e;return!a.includes(n)})).find((e=>{let[t,o]=e;return v.has(t.toLowerCase())&&Number.parseInt(o,10)===n}));return null===u||void 0===u?void 0:u[0]}(I=T||(T={})).json="application/json",I.geojson="application/geo+json",I.openapi="application/vnd.oai.openapi+json;version=3.0"}}]);
//# sourceMappingURL=6799.0584ff6c.chunk.js.map