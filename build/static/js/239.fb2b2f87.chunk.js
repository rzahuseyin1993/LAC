"use strict";(self.webpackChunklac=self.webpackChunklac||[]).push([[239],{60239:(e,r,a)=>{a.d(r,{N:()=>b,populateOperationalLayers:()=>c});var t=a(94643),y=(a(81806),a(77491)),i=a(62487),n=a(70652);function o(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}var l=a(2487),L=a(81589);async function c(e,r,a){if(!r)return;const t=r.map((e=>async function(e,r){return async function(e,r,a){const t=new e;return t.read(r,a.context),"group"===t.type&&("GroupLayer"===r.layerType?await b(t,r,a):M(r)?function(e,r,a){r.itemId&&(e.portalItem=new n.default({id:r.itemId,portal:null===a||void 0===a?void 0:a.portal}),e.when((()=>{var t,y;const i=t=>{var y;const i=t.layerId;w(t,e,r,i,a);const n=null===(y=r.featureCollection)||void 0===y||null===(y=y.layers)||void 0===y?void 0:y[i];n&&t.read(n,a)};null!==(t=e.layers)&&void 0!==t&&t.forEach(i),null===(y=e.tables)||void 0===y||y.forEach(i)})))}(t,r,a.context):m(r)&&await async function(e,r,a){var t;const y=i.S.FeatureLayer,n=await y(),o=r.featureCollection,l=null===o||void 0===o?void 0:o.showLegend,L=null===o||void 0===o||null===(t=o.layers)||void 0===t?void 0:t.map(((t,y)=>{const i=new n;i.read(t,a);const o={...a,ignoreDefaults:!0};return w(i,e,r,y,o),null!=l&&i.read({showLegend:l},o),i}));e.layers.addMany(null!==L&&void 0!==L?L:[])}(t,r,a.context)),await(0,L.L)(t,a.context),t}(await G(e,r),e,r)}(e,a))),y=await Promise.allSettled(t);for(const i of y)"rejected"===i.status||i.value&&e.add(i.value)}const u={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},s={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},d={ArcGISFeatureLayer:"FeatureLayer"},S={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},p={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"UnsupportedLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},v={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"UnsupportedLayer"},I={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},g={...p,LinkChartLayer:"LinkChartLayer"},T={...v},f={...I};async function G(e,r){var a,t;const L=r.context,c=A(L);let u=e.layerType||e.type;!u&&(null===r||void 0===r?void 0:r.defaultLayerType)&&(u=r.defaultLayerType);const s=c[u];let d=s?i.S[s]:i.S.UnknownLayer;if(M(e)){const r=null===L||void 0===L?void 0:L.portal;if(e.itemId){const a=new n.default({id:e.itemId,portal:r});await a.load();const t=(await(0,l.n)(a,new y.v)).className||"UnknownLayer";d=i.S[t]}}else"ArcGISFeatureLayer"===u?function(e){return o(e,"notes")}(e)||function(e){return o(e,"markup")}(e)?d=i.S.MapNotesLayer:function(e){return o(e,"route")}(e)?d=i.S.RouteLayer:m(e)&&(d=i.S.GroupLayer):null!==(a=e.wmtsInfo)&&void 0!==a&&a.url&&e.wmtsInfo.layerIdentifier?d=i.S.WMTSLayer:"WFS"===u&&"2.0.0"!==(null===(t=e.wfsInfo)||void 0===t?void 0:t.version)&&(d=i.S.UnsupportedLayer);return d()}function m(e){var r,a;return"ArcGISFeatureLayer"===e.layerType&&!M(e)&&(null!==(r=null===(a=e.featureCollection)||void 0===a||null===(a=a.layers)||void 0===a?void 0:a.length)&&void 0!==r?r:0)>1}function M(e){return"Feature Collection"===e.type}function A(e){let r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=S;break;case"ground":r=s;break;case"tables":r=d;break;default:r=u}break;case"link-chart":switch(e.layerContainerType){case"basemap":r=f;break;case"tables":r=T;break;default:r=g}break;default:switch(e.layerContainerType){case"basemap":r=I;break;case"tables":r=v;break;default:r=p}}return r}async function b(e,r,a){const y=new t.A,i=c(y,Array.isArray(r.layers)?r.layers:[],a);try{try{if(await i,"group"===e.type)return e.layers.addMany(y),e}catch(n){e.destroy();for(const e of y)e.destroy();throw n}}catch(n){throw n}}function w(e,r,a,t,y){var i,n;e.read({id:"".concat(r.id,"-sublayer-").concat(t),visibility:null===(i=null===(n=a.visibleLayers)||void 0===n?void 0:n.includes(t))||void 0===i||i},y)}},81589:(e,r,a)=>{a.d(r,{L:()=>n});var t=a(98773),y=a(50346),i=a(62754);async function n(e,r,a){const n=e&&e.getAtOrigin&&e.getAtOrigin("renderer",r.origin);if(n&&"unique-value"===n.type&&n.styleOrigin){const o=await(0,t.Ke)(n.populateFromStyle());if((0,y.Te)(a),!1===o.ok){const a=o.error;null!==r&&void 0!==r&&r.messages&&r.messages.push(new i.A("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(a.message),{error:a,context:r})),e.clear("renderer",null===r||void 0===r?void 0:r.origin)}}}}}]);
//# sourceMappingURL=239.fb2b2f87.chunk.js.map