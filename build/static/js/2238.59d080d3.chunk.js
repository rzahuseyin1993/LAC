"use strict";(self.webpackChunklac=self.webpackChunklac||[]).push([[2238,5810,1960],{1365:(t,e,s)=>{s.r(e),s.d(e,{default:()=>C});var r=s(35143),o=(s(35238),s(50076)),i=s(50346),n=s(90534),a=s(46053),u=s(81806),l=(s(76460),s(47249),s(28379)),p=s(85842),d=s(38451),c=s(49304),y=s(16783),h=s(77725),v=s(76797);let m=class extends c.A{constructor(t){super(t),this.type="csv",this.refresh=(0,i.sg)((async t=>{await this.load();const{extent:e,timeExtent:s}=await this._connection.invoke("refresh",t);return e&&(this.sourceJSON.extent=e),s&&(this.sourceJSON.timeInfo.timeExtent=[s.start,s.end]),{dataChanged:!0,updates:{extent:this.sourceJSON.extent,timeInfo:this.sourceJSON.timeInfo}}}))}load(t){const e=null!=t?t.signal:null;return this.addResolvingPromise(this._startWorker(e)),Promise.resolve(this)}destroy(){var t;null!==(t=this._connection)&&void 0!==t&&t.close(),this._connection=null}async openPorts(){return await this.load(),this._connection.openPorts()}async queryFeatures(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.load(e);const s=await this._connection.invoke("queryFeatures",t?t.toJSON():null,e);return h.A.fromJSON(s)}async queryFeaturesJSON(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.load(e),this._connection.invoke("queryFeatures",t?t.toJSON():null,e)}async queryFeatureCount(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.load(e),this._connection.invoke("queryFeatureCount",t?t.toJSON():null,e)}async queryObjectIds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.load(e),this._connection.invoke("queryObjectIds",t?t.toJSON():null,e)}async queryExtent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.load(e);const s=await this._connection.invoke("queryExtent",t?t.toJSON():null,e);return{count:s.count,extent:v.A.fromJSON(s.extent)}}async querySnapping(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.load(e),this._connection.invoke("querySnapping",t,e)}async _startWorker(t){this._connection=await(0,y.ho)("CSVSourceWorker",{strategy:(0,u.A)("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{url:e,delimiter:s,fields:r,latitudeField:o,longitudeField:i,spatialReference:n,timeInfo:a}=this.loadOptions,l=await this._connection.invoke("load",{url:e,customParameters:this.customParameters,parsingOptions:{delimiter:s,fields:null===r||void 0===r?void 0:r.map((t=>t.toJSON())),latitudeField:o,longitudeField:i,spatialReference:null===n||void 0===n?void 0:n.toJSON(),timeInfo:null===a||void 0===a?void 0:a.toJSON()}},{signal:t});this.locationInfo=l.locationInfo,this.sourceJSON=l.layerDefinition,this.delimiter=l.delimiter}};(0,r._)([(0,a.MZ)()],m.prototype,"type",void 0),(0,r._)([(0,a.MZ)()],m.prototype,"loadOptions",void 0),(0,r._)([(0,a.MZ)()],m.prototype,"customParameters",void 0),(0,r._)([(0,a.MZ)()],m.prototype,"locationInfo",void 0),(0,r._)([(0,a.MZ)()],m.prototype,"sourceJSON",void 0),(0,r._)([(0,a.MZ)()],m.prototype,"delimiter",void 0),m=(0,r._)([(0,p.$)("esri.layers.graphics.sources.CSVSource")],m);var g=s(40296),f=s(97015),w=s(79453),S=s(13312);function _(t,e){throw new o.A(e,"CSVLayer (title: ".concat(t.title,", id: ").concat(t.id,") cannot be saved to a portal item"))}let A=class extends d.default{constructor(){super(...arguments),this.geometryType="point",this.capabilities=(0,g.f)(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.spatialReference=S.A.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(t,e){return"string"==typeof t?{url:t,...e}:t}load(t){const e=null!=t?t.signal:null,s=this.loadFromPortal({supportedTypes:["CSV"],supportsData:!1},t).catch(i.QP).then((async()=>this.initLayerProperties(await this.createGraphicsSource(e))));return this.addResolvingPromise(s),Promise.resolve(this)}get isTable(){return this.loaded&&null==this.geometryType}readWebMapLabelsVisible(t,e){var s;return null!=e.showLabels?e.showLabels:!(null===(s=e.layerDefinition)||void 0===s||null===(s=s.drawingInfo)||void 0===s||!s.labelingInfo)}set url(t){if(!t)return void this._set("url",t);const e=(0,n.An)(t);this._set("url",e.path),e.query&&(this.customParameters={...this.customParameters,...e.query})}async createGraphicsSource(t){var e,s,r,o,i;const n=new m({loadOptions:{delimiter:this.delimiter,fields:this.fields,latitudeField:null!==(e=this.latitudeField)&&void 0!==e?e:void 0,longitudeField:null!==(s=this.longitudeField)&&void 0!==s?s:void 0,spatialReference:null!==(r=this.spatialReference)&&void 0!==r?r:void 0,timeInfo:null!==(o=this.timeInfo)&&void 0!==o?o:void 0,url:this.url},customParameters:null!==(i=this.customParameters)&&void 0!==i?i:void 0});return this._set("source",n),await n.load({signal:t}),this.read({locationInfo:n.locationInfo,columnDelimiter:n.delimiter},{origin:"service",url:this.parsedUrl}),n}queryFeatures(t,e){return this.load().then((()=>this.source.queryFeatures(f.A.from(t)||this.createQuery()))).then((t=>{if(null!==t&&void 0!==t&&t.features)for(const e of t.features)e.layer=e.sourceLayer=this;return t}))}queryObjectIds(t,e){return this.load().then((()=>this.source.queryObjectIds(f.A.from(t)||this.createQuery())))}queryFeatureCount(t,e){return this.load().then((()=>this.source.queryFeatureCount(f.A.from(t)||this.createQuery())))}queryExtent(t,e){return this.load().then((()=>this.source.queryExtent(f.A.from(t)||this.createQuery())))}read(t,e){super.read(t,e),e&&"service"===e.origin&&this.revert(["latitudeField","longitudeField"],"service")}write(t,e){return super.write(t,{...e,writeLayerSchema:!0})}clone(){throw new o.A("csv-layer:clone","CSVLayer (title: ".concat(this.title,", id: ").concat(this.id,") cannot be cloned"))}async save(t){return _(this,"csv-layer:save")}async saveAs(t,e){return _(this,"csv-layer:save-as")}async hasDataChanged(){try{const{dataChanged:t,updates:e}=await this.source.refresh(this.customParameters);return null!=e&&this.read(e,{origin:"service",url:this.parsedUrl,ignoreDefaults:!0}),t}catch{}return!1}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};(0,r._)([(0,a.MZ)({readOnly:!0,json:{read:!1,write:!1}})],A.prototype,"capabilities",void 0),(0,r._)([(0,a.MZ)({type:[","," ",";","|","\t"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],A.prototype,"delimiter",void 0),(0,r._)([(0,a.MZ)({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],A.prototype,"editingEnabled",void 0),(0,r._)([(0,a.MZ)({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],A.prototype,"fields",void 0),(0,r._)([(0,a.MZ)({type:Boolean,readOnly:!0})],A.prototype,"isTable",null),(0,r._)([(0,l.w)("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],A.prototype,"readWebMapLabelsVisible",null),(0,r._)([(0,a.MZ)({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],A.prototype,"latitudeField",void 0),(0,r._)([(0,a.MZ)({type:["show","hide"]})],A.prototype,"listMode",void 0),(0,r._)([(0,a.MZ)({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],A.prototype,"locationType",void 0),(0,r._)([(0,a.MZ)({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],A.prototype,"longitudeField",void 0),(0,r._)([(0,a.MZ)({type:["CSV"]})],A.prototype,"operationalLayerType",void 0),(0,r._)([(0,a.MZ)()],A.prototype,"outFields",void 0),(0,r._)([(0,a.MZ)({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],A.prototype,"path",void 0),(0,r._)([(0,a.MZ)({json:{read:!1},cast:null,type:m,readOnly:!0})],A.prototype,"source",void 0),(0,r._)([(0,a.MZ)({json:{read:!1},value:"csv",readOnly:!0})],A.prototype,"type",void 0),(0,r._)([(0,a.MZ)({json:{read:w.r,write:{isRequired:!0,ignoreOrigin:!0,writer:w.w}}})],A.prototype,"url",null),A=(0,r._)([(0,p.$)("esri.layers.CSVLayer")],A);const C=A},12406:(t,e,s)=>{s.d(e,{p:()=>n});var r=s(35143),o=s(46053),i=(s(81806),s(76460),s(47249),s(85842));const n=t=>{let e=class extends t{get apiKey(){var t;return this._isOverridden("apiKey")?this._get("apiKey"):function(t){return"portalItem"in t}(this)?null===(t=this.portalItem)||void 0===t?void 0:t.apiKey:null}set apiKey(t){null!=t?this._override("apiKey",t):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,r._)([(0,o.MZ)({type:String})],e.prototype,"apiKey",null),e=(0,r._)([(0,i.$)("esri.layers.mixins.APIKeyMixin")],e),e}},19502:(t,e,s)=>{s.d(e,{b:()=>u});var r=s(35143),o=s(76460),i=s(46053),n=(s(81806),s(47249),s(85842)),a=s(13096);const u=t=>{let e=class extends t{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const t=(0,a.qg)(this.url);if(null!=t&&t.title)return t.title}return this._get("title")||""}set title(t){this._set("title",t)}set url(t){this._set("url",(0,a.Jf)(t,o.A.getLogger(this)))}};return(0,r._)([(0,i.MZ)()],e.prototype,"title",null),(0,r._)([(0,i.MZ)({type:String})],e.prototype,"url",null),e=(0,r._)([(0,n.$)("esri.layers.mixins.ArcGISService")],e),e}},91485:(t,e,s)=>{s.d(e,{A:()=>y});var r=s(35143),o=s(69098),i=s(42553),n=s(46053),a=(s(81806),s(76460),s(47249),s(28379)),u=s(85842),l=s(17707),p=s(90907),d=s(15427);let c=class extends((0,o.O)(i.oY)){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const e={};for(const s of Object.keys(t))e[s]=(0,p.rS)(t[s]);return e}writeDomains(t,e){const s={};for(const o of Object.keys(t)){var r;t[o]&&(s[o]=null===(r=t[o])||void 0===r?void 0:r.toJSON())}e.domains=s}};(0,r._)([(0,n.MZ)({json:{write:!0}})],c.prototype,"id",void 0),(0,r._)([(0,n.MZ)({json:{write:!0}})],c.prototype,"name",void 0),(0,r._)([(0,n.MZ)({json:{write:!0}})],c.prototype,"domains",void 0),(0,r._)([(0,a.w)("domains")],c.prototype,"readDomains",null),(0,r._)([(0,l.K)("domains")],c.prototype,"writeDomains",null),(0,r._)([(0,n.MZ)({type:[d.A],json:{write:!0}})],c.prototype,"templates",void 0),c=(0,r._)([(0,u.$)("esri.layers.support.FeatureType")],c);const y=c},5618:(t,e,s)=>{s.d(e,{A:()=>p});var r,o=s(35143),i=s(94643),n=s(42553),a=s(46053),u=(s(81806),s(76460),s(47249),s(85842));let l=r=class extends n.oY{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new i.A}clone(){return new r({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,o._)([(0,a.MZ)({type:String,json:{write:!0}})],l.prototype,"floorField",void 0),(0,o._)([(0,a.MZ)({json:{read:!1,write:!1}})],l.prototype,"viewAllMode",void 0),(0,o._)([(0,a.MZ)({json:{read:!1,write:!1}})],l.prototype,"viewAllLevelIds",void 0),l=r=(0,o._)([(0,u.$)("esri.layers.support.LayerFloorInfo")],l);const p=l},44141:(t,e,s)=>{s.d(e,{S:()=>d});var r=s(81806),o=s(13096);function i(t,e,s){return!!a(t,e,s)}function n(t,e,s){return a(t,e,s)}function a(t,e,s){return t&&t.hasOwnProperty(e)?t[e]:s}const u={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function l(t){var e;const s=null===t||void 0===t||null===(e=t.supportedSpatialAggregationStatistics)||void 0===e?void 0:e.map((t=>t.toLowerCase()));return{envelope:!(null===s||void 0===s||!s.includes("envelopeaggregate")),centroid:!(null===s||void 0===s||!s.includes("centroidaggregate")),convexHull:!(null===s||void 0===s||!s.includes("convexhullaggregate"))}}function p(t,e){var s;const r=null===t||void 0===t||null===(s=t.supportedOperationsWithCacheHint)||void 0===s?void 0:s.map((t=>t.toLowerCase()));return!(null===r||void 0===r||!r.includes(e.toLowerCase()))}function d(t,e){return{analytics:c(t),attachment:y(t),data:h(t),metadata:v(t),operations:m(t.capabilities,t,e),query:g(t,e),queryRelated:f(t),queryTopFeatures:w(t),editing:S(t)}}function c(t){return{supportsCacheHint:p(t.advancedQueryCapabilities,"queryAnalytics")}}function y(t){const e=t.attachmentProperties,s={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:p(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:i(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach((t=>{const e=u[t.name];e&&(s[e]=!!t.isEnabled)})),s}function h(t){return{isVersioned:i(t,"isDataVersioned",!1),supportsAttachment:i(t,"hasAttachments",!1),supportsM:i(t,"hasM",!1),supportsZ:i(t,"hasZ",!1)}}function v(t){return{supportsAdvancedFieldProperties:i(t,"supportsFieldDescriptionProperty",!1)}}function m(t,e,s){const r=t?t.toLowerCase().split(",").map((t=>t.trim())):[],n=s?(0,o.qg)(s):null,a=r.includes(null!=n&&"MapServer"===n.serverType?"data":"query"),u=r.includes("editing")&&!e.datesInUnknownTimezone;let l=u&&r.includes("create"),p=u&&r.includes("delete"),d=u&&r.includes("update");const c=r.includes("changetracking"),y=e.advancedQueryCapabilities;return u&&!(l||p||d)&&(l=p=d=!0),{supportsCalculate:i(e,"supportsCalculate",!1),supportsTruncate:i(e,"supportsTruncate",!1),supportsValidateSql:i(e,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:p,supportsEditing:u,supportsChangeTracking:c,supportsQuery:a,supportsQueryAnalytics:i(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:i(y,"supportsQueryAttachments",!1),supportsQueryTopFeatures:i(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:i(e,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:d,supportsExceedsLimitStatistics:i(e,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:i(e,"supportsAsyncConvert3D",!1)}}function g(t,e){var s;const a=t.advancedQueryCapabilities,u=t.ownershipBasedAccessControlForFeatures,d=t.archivingInfo,c=t.currentVersion,y=!(null===e||void 0===e?void 0:e.includes("MapServer"))||c>=(0,r.A)("mapserver-pbf-version-support"),h=(0,o.Wo)(e),v=new Set((null!==(s=t.supportedQueryFormats)&&void 0!==s?s:"").split(",").map((t=>t.toLowerCase().trim())));return{supportsStatistics:i(a,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:i(a,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:i(a,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:l(a),supportsCentroid:i(a,"supportsReturningGeometryCentroid",!1),supportsDistance:i(a,"supportsQueryWithDistance",!1),supportsDistinct:i(a,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:i(a,"supportsReturningQueryExtent",!1),supportsGeometryProperties:i(a,"supportsReturningGeometryProperties",!1),supportsHavingClause:i(a,"supportsHavingClause",!1),supportsOrderBy:i(a,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:i(a,"supportsPagination",!1),supportsQuantization:i(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:i(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:i(t,"supportsReturningQueryGeometry",!1),supportsResultType:i(a,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:i(a,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:i(a,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:i(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:i(a,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:i(u,"allowAnonymousToQuery",!0),supportsQueryByOthers:i(u,"allowOthersToQuery",!0),supportsHistoricMoment:i(d,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:y&&v.has("pbf"),supportsDisjointSpatialRelationship:i(a,"supportsDisjointSpatialRel",!1),supportsCacheHint:i(a,"supportsQueryWithCacheHint",!1)||p(a,"query"),supportsDefaultSpatialReference:i(a,"supportsDefaultSR",!1),supportsCompactGeometry:h,supportsFullTextSearch:i(a,"supportsFullTextSearch",!1),maxRecordCountFactor:n(t,"maxRecordCountFactor",void 0),maxRecordCount:n(t,"maxRecordCount",void 0),standardMaxRecordCount:n(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:n(t,"tileMaxRecordCount",void 0)}}function f(t){const e=t.advancedQueryCapabilities,s=i(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:i(e,"supportsQueryRelatedPagination",!1),supportsCount:s,supportsOrderBy:s,supportsCacheHint:p(e,"queryRelated")}}function w(t){return{supportsCacheHint:p(t.advancedQueryCapabilities,"queryTopFilter")}}function S(t){const e=t.ownershipBasedAccessControlForFeatures,s=t?t.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:i(t,"allowGeometryUpdates",!0),supportsGlobalId:i(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:i(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:i(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:i(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:i(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:i(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:i(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:i(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:i(e,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:i(s,"supportsAsyncApplyEdits",!1),zDefault:n(t,"zDefault",void 0)}}},57831:(t,e,s)=>{s.d(e,{q:()=>o});var r=s(86729);function o(t,e,s){if(null===s||void 0===s||!s.features||!s.hasZ)return;const o=(0,r.N)(s.geometryType,e,t.outSpatialReference);if(null!=o)for(const r of s.features)o(r.geometry)}}}]);
//# sourceMappingURL=2238.59d080d3.chunk.js.map